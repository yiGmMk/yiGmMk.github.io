<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo_32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo_16x16.ico">
  <link rel="mask-icon" href="/Image/logo.svg" color="#222">
  <meta name="msvalidate.01" content="B6FE76A783A1770409EC903DE2C7AC6A">
  <meta name="baidu-site-verification" content="pGt0Y3hHUQ">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"programnotes.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"changyan | disqus | disqusjs | gitalk | livere | valine","storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="阅读更多 &lt; !–more– &gt; 1、排版 一般情况下，源程序有效注释量必须在20％以上。  说明：注释的原则是有助于对程序的阅读理解，在该加的地方都加了，注释不宜太多也不能太少，注释语言必须准确、易懂、简洁。  相对独立的程序块之间、变量说明之后必须加空行。">
<meta property="og:type" content="article">
<meta property="og:title" content="Coding Standard">
<meta property="og:url" content="https://programnotes.cn/coding%20standard/index.html">
<meta property="og:site_name" content="ProgramNotes">
<meta property="og:description" content="阅读更多 &lt; !–more– &gt; 1、排版 一般情况下，源程序有效注释量必须在20％以上。  说明：注释的原则是有助于对程序的阅读理解，在该加的地方都加了，注释不宜太多也不能太少，注释语言必须准确、易懂、简洁。  相对独立的程序块之间、变量说明之后必须加空行。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://programnotes.cn/coding%20standard/media/image1.png">
<meta property="article:published_time" content="2019-07-12T00:00:00.000Z">
<meta property="article:modified_time" content="2022-01-11T09:36:11.410Z">
<meta property="article:author" content="yigmmk">
<meta property="article:tag" content="OpenCV;Golang;Tensorflow;Deep Learning;Distributed System">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://programnotes.cn/coding%20standard/media/image1.png">

<link rel="canonical" href="https://programnotes.cn/coding%20standard/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Coding Standard | ProgramNotes</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?933db492079d69649381bedb23856044";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ProgramNotes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">lifelong learning & practice makes perfect</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">91</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">61</span></a>

  </li>
        <li class="menu-item menu-item-微服务">

    <a href="/categories/golang" rel="section"><i class="laptop-code fa-fw"></i>微服务</a>

  </li>
        <li class="menu-item menu-item-深度学习">

    <a href="/categories/deeplearning" rel="section"><i class="flag fa-fw"></i>深度学习</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    

  <a href="https://github.com/yiGmMk" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/coding%20standard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn &  share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ProgramNotes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Coding Standard
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-07-12 00:00:00" itemprop="dateCreated datePublished" datetime="2019-07-12T00:00:00Z">2019-07-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-11 09:36:11" itemprop="dateModified" datetime="2022-01-11T09:36:11Z">2022-01-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/coding/" itemprop="url" rel="index"><span itemprop="name">coding</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>12 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>阅读更多 &lt; !–more– &gt;</p>
<h2 id="1、排版"><a href="#1、排版" class="headerlink" title="1、排版"></a>1、排版</h2><ol>
<li>一般情况下，源程序有效注释量必须在20％以上。</li>
</ol>
<p><strong>说明：</strong>注释的原则是有助于对程序的阅读理解，在该加的地方都加了，注释不宜太多也不能太少，注释语言必须准确、易懂、简洁。</p>
<ol start="2">
<li>相对独立的程序块之间、变量说明之后必须加空行。<a id="more"></a></li>
</ol>
<p><strong>示例：</strong>如下例子不符合规范。</p>
<blockquote>
<p>if (!valid_ni(ni))</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>repssn_ind = ssn_data[index].repssn_index;</p>
<p>repssn_ni  = ssn_data[index].ni;</p>
<p>应如下书写</p>
<p>if (!valid_ni(ni))</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>repssn_ind = ssn_data[index].repssn_index;</p>
<p>repssn_ni  = ssn_data[index].ni;</p>
</blockquote>
<ol start="3">
<li>较长的语句要分成多行书写，长表达式要在低优先级操作符处划分新行，操作符放在新行之首，划分出的新行要进行适当的缩进，使排版整齐，语句可读。</li>
</ol>
<blockquote>
<p><strong>示例：</strong></p>
</blockquote>
<p>perm_count_msg.head.len = NO7_TO_STAT_PERM_COUNT_LEN</p>
<p>+ STAT_SIZE_PER_FRAM</p>
<p>* sizeof( _UL );</p>
<blockquote>
<p>act_task_table[frame_id * STAT_TASK_CHECK_NUMBER + index].occupied</p>
<pre><code>= stat\_poi\[index\].occupied;</code></pre><p>act_task_table[taskno].duration_true_or_false</p>
<pre><code>= SYS\_get\_sccp\_statistic\_state( stat\_item );</code></pre><p>report_or_not_flag = ((taskno &lt; MAX_ACT_TASK_NUMBER)</p>
<pre><code>&amp;&amp; (n7stat\_stat\_item\_valid (stat\_item))

&amp;&amp; (act\_task\_table\[taskno\].result\_data != 0));</code></pre></blockquote>
<ol start="4">
<li>循环、判断等语句中若有较长的表达式或语句，则要进行适应的划分，长表达式要在低优先级操作符处划分新行，操作符放在新行之首。</li>
</ol>
<p><strong>示例：</strong></p>
<blockquote>
<p>if ((taskno &lt; max_act_task_number)</p>
<pre><code>&amp;&amp; (n7stat\_stat\_item\_valid (stat\_item)))</code></pre><p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>for (i = 0, j = 0; (i &lt; BufferKeyword[word_index].word_length)</p>
<pre><code>&amp;&amp; (j \&lt; NewKeyword.word\_length); i++, j++)</code></pre><p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>for (i = 0, j = 0;</p>
<pre><code>(i \&lt; first\_word\_length) &amp;&amp; (j \&lt; second\_word\_length);

i++, j++)</code></pre><p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
</blockquote>
<ol start="5">
<li>若函数或过程中的参数较长，则要进行适当的划分。</li>
</ol>
<p><strong>示例：</strong></p>
<blockquote>
<p>n7stat_str_compare((BYTE *) &amp; stat_object,</p>
<pre><code>(BYTE \*) &amp; (act\_task\_table\[taskno\].stat\_object),

sizeof (\_STAT\_OBJECT));</code></pre><p>n7stat_flash_act_duration( stat_item, frame_id *STAT_TASK_CHECK_NUMBER</p>
<pre><code>+ index, stat\_object );</code></pre></blockquote>
<ol start="6">
<li>不允许把多个短语句写在一行中，即一行只写一条语句。</li>
</ol>
<p><strong>示例：</strong>如下例子不符合规范。</p>
<blockquote>
<p>rect.length = 0;  rect.width = 0;</p>
<p><strong>应如下书写</strong></p>
<p>rect.length = 0;</p>
<p>rect.width  = 0;</p>
</blockquote>
<ol start="7">
<li>if、for、do、while、case、switch、default等语句自占一行，且if、for、do、while等语句的执行语句部分无论多少都要加括号{}。</li>
</ol>
<p><strong>示例：</strong>如下例子不符合规范。</p>
<blockquote>
<p>if (pUserCR == NULL) return;</p>
<p>应如下书写：</p>
<p>if (pUserCR == NULL)</p>
<p>{</p>
<pre><code>return;</code></pre><p>}</p>
</blockquote>
<ol start="8">
<li>程序块的分界符（如C/C++语言的大括号’{‘和’}’）应各独占一行并且位于同一列，同时与引用它们的语句左对齐。在函数体的开始、类的定义、结构的定义、枚举的定义以及if、for、do、while、switch、case语句中的程序都要采用如上的缩进方式。</li>
</ol>
<p><strong>示例：</strong>如下例子不符合规范。</p>
<blockquote>
<p>for (...) {</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>if (...)</p>
<pre><code>{

\... // program code

}</code></pre><p>void example_fun( void )</p>
<pre><code>{

\... // program code

}</code></pre><p>应如下书写。</p>
<p>for (...)</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>if (...)</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>void example_fun( void )</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
</blockquote>
<ol start="9">
<li><strong>一行程序以小于80字符为宜，不要写得过长。</strong></li>
</ol>
<h2 id="2、注释"><a href="#2、注释" class="headerlink" title="2、注释"></a>2、注释</h2><ol>
<li>一般情况下，源程序有效注释量必须在20％以上。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>注释的原则是有助于对程序的阅读理解，在该加的地方都加了，注释不宜太多也不能太少，注释语言必须准确、易懂、简洁</p>
</blockquote>
<ol start="2">
<li><p>注释格式尽量统一，建议单行注释采用”//…”，多行注释采用”/* ……</p>
<p> //*/“。注释采用中文</p>
</li>
<li><p>源文件头部（如头文件.h文件、.inc文件、.def文件、编译说明文件.cfg等）应进行注释，列出：版权说明、版本号、生成日期、作者、模块目的/功能、主要函数及其功能、修改日志等，头文件的注释中还应有函数功能简要说明。</p>
</li>
</ol>
<blockquote>
<p><strong>示例1：</strong>下面这段源文件的头注释比较标准，当然，并不局限于此格式，但上述信息建议要包含在内。</p>
<p>/*************************************************</p>
<p>Copyright (C), 1988-1999, Huawei Tech. Co., Ltd.</p>
<p>File name:       // 文件名</p>
<p>Author:       Version:        Date: // 作者、版本及完成日期</p>
<p>Description:     // 用于详细说明此程序文件完成的主要功能，与其他模块</p>
<pre><code>// 或函数的接口，输出值、取值范围、含义及参数间的控

// 制、顺序、独立或依赖等关系</code></pre><p>Others:          // 其它内容的说明</p>
<p>Function List:   // 主要函数列表，每条记录应包括函数名及功能简要说明</p>
<pre><code>1. \....</code></pre><p>History:         // 修改历史记录列表，每条修改记录应包括修改日期、修改</p>
<pre><code>               // 者及修改内容简述

1. Date:

   Author:

   Modification:

2. \...</code></pre><p>*************************************************/</p>
<p><strong>说明1：</strong>Description一项描述本文件的内容、功能、内部各部分之间的关系及本文件与其它文件关系等。</p>
<p>History是修改历史记录列表，每条修改记录应包括修改日期、修改者及修改内容简述。</p>
</blockquote>
<p><strong>示例2： .h中声明函数原型</strong></p>
<blockquote>
<p>//--获得当前应用程序的全名</p>
<p>CString GetAppExeFileFullName();</p>
</blockquote>
<ol start="4">
<li>函数头部应进行注释，列出：函数的目的/功能、输入参数、输出参数、返回值、调用关系（函数、表）等。</li>
</ol>
<blockquote>
<p><strong>示例：</strong>下面这段函数的注释比较标准，当然，并不局限于此格式，但上述信息建议要包含在内。</p>
<p>/*************************************************</p>
<p>Function:        // 函数名称</p>
<p>Description:     // 函数功能、性能等的描述</p>
<p>Calls:            // 被本函数调用的函数清单</p>
<p>Called By:       // 调用本函数的函数清单</p>
<p>Table Accessed: // 被访问的表（此项仅对于牵扯到数据库操作的程序）</p>
<p>Table Updated:   // 被修改的表（此项仅对于牵扯到数据库操作的程序）</p>
<p>Input:           // 输入参数说明，包括每个参数的作</p>
<pre><code>// 用、取值说明及参数间关系。</code></pre><p>Output:          // 对输出参数的说明。</p>
<p>Return:          // 函数返回值的说明</p>
<p>Others:          // 其它说明</p>
<p>*************************************************/</p>
<p><strong>示例2：</strong></p>
<p>//***********************************************************</p>
<p>//函数类别： 系统操作</p>
<p>//函数名称： GetAppExeFileFullName</p>
<p>//函数用途： 获得当前应用程序的全名</p>
<p>//原始作者： 陆 宏 伟</p>
<p>//原始日期： 12/4 /1999</p>
<p>//***********************************************************</p>
<p>CString GetAppExeFileFullName()</p>
<p>{</p>
<p>char ModuleFileName[_MAX_PATH];</p>
<p>GetModuleFileName( NULL, ModuleFileName, _MAX_PATH);</p>
<p>return CString( ModuleFileName );</p>
<p>}</p>
</blockquote>
<ol start="5">
<li><p>边写代码边注释，修改代码同时修改相应的注释，以保证注释与代码的一致性。不再有用的注释要删除。</p>
</li>
<li><p>注释应与其描述的代码相近，对代码的注释应放在其上方或右方（对单条语句的注释）相邻位置，不可放在下面，如放于上方则需与其上面的代码用空行隔开。</p>
</li>
</ol>
<blockquote>
<p><strong>示例：</strong>如下例子不符合规范。</p>
<p>repssn_ind = ssn_data[index].repssn_index;</p>
<p>repssn_ni = ssn_data[index].ni;</p>
<p>/* get replicate sub system index and net indicator */</p>
<p><strong>应如下书写，将注释放于上方</strong></p>
<p>/* get replicate sub system index and net indicator */</p>
<p>repssn_ind = ssn_data[index].repssn_index;</p>
<p>repssn_ni = ssn_data[index].ni;</p>
</blockquote>
<ol start="7">
<li>对于所有的变量、常量，如果其命名不是充分自注释的，在声明时都必须加以注释，说明其含义。变量、常量、宏的注释应放在其上方相邻位置或右方。</li>
</ol>
<p><strong>示例：</strong></p>
<blockquote>
<p>/* active statistic task number */</p>
<p>#define MAX_ACT_TASK_NUMBER 1000</p>
<p>#define MAX_ACT_TASK_NUMBER 1000 /* active statistic task number */</p>
</blockquote>
<ol start="8">
<li>数据结构声明(包括数组、结构、类、枚举等)，如果其命名不是充分自注释的，必须加以注释。对数据结构的注释应放在其上方相邻位置，不可放在下面；对结构中的每个域的注释放在此域的右方。</li>
</ol>
<blockquote>
<p><strong>示例：</strong>可按如下形式说明枚举/数据/联合结构。</p>
<p>/* sccp interface with sccp user primitive message name */</p>
<p>enum  SCCP_USER_PRIMITIVE</p>
<p>{</p>
<pre><code>N\_UNITDATA\_IND, /\* sccp notify sccp user unit data come \*/

N\_NOTICE\_IND,    /\* sccp notify user the No.7 network can not \*/

                 /\* transmission this message \*/

N\_UNITDATA\_REQ, /\* sccp user\&apos;s unit data transmission request\*/</code></pre><p>}</p>
</blockquote>
<ol start="9">
<li>全局变量要有较详细的注释，包括对其功能、取值范围、哪些函数或过程存取它以及存取时注意事项等的说明。</li>
</ol>
<p><strong>示例：</strong></p>
<blockquote>
<p>/* The ErrorCode when SCCP translate */</p>
<p>/* Global Title failure, as follows */      // 变量作用、含义</p>
<p>/* 0 － SUCCESS   1 － GT Table error */</p>
<p>/* 2 － GT error  Others － no use  */       // 变量取值范围</p>
<p>/* only  function  SCCPTranslate() in */</p>
<p>/* this modual can modify it,  and  other */</p>
<p>/* module can visit it through call */</p>
<p>/* the  function GetGTTransErrorCode() */    // 使用方法</p>
<p>BYTE g_GTTranErrorCode;</p>
</blockquote>
<ol start="10">
<li>注释与所描述内容进行同样的缩排。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>可使程序排版整齐，并方便注释的阅读与理解。</p>
<p><strong>示例：</strong>如下例子，排版不整齐，阅读稍感不方便。</p>
<p>void example_fun( void )</p>
<p>{</p>
<p>/* code one comments */</p>
<pre><code>CodeBlock One



    /\* code two comments \*/

CodeBlock Two</code></pre><p>}</p>
<p>应改为如下布局。</p>
<p>void example_fun( void )</p>
<p>{</p>
<pre><code>/\* code one comments \*/

CodeBlock One



/\* code two comments \*/

CodeBlock Two</code></pre><p>}</p>
</blockquote>
<ol start="11">
<li>在代码的功能、意图层次上进行注释，提供有用、额外的信息。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>注释的目的是解释代码的目的、功能和采用的方法，提供代码以外的信息，帮助读者理解代码，防止没必要的重复注释信息。</p>
<p><strong>示例：</strong>如下注释意义不大。</p>
<p>/* if receive_flag is TRUE */</p>
<p>if (receive_flag)</p>
<p>而如下的注释则给出了额外有用的信息。</p>
<p>/* if mtp receive a message from links */</p>
<p>if (receive_flag)</p>
</blockquote>
<ol start="12">
<li>在程序块的结束行右方加注释标记，以表明某程序块的结束。</li>
</ol>
<p><strong>说明：</strong>当代码段较长，特别是多重嵌套时，这样做可以使代码更清晰，更便于阅读。</p>
<p><strong>示例：</strong>参见如下例子。</p>
<blockquote>
<p>if (...)</p>
<p>{</p>
<pre><code>// program code



while (index \&lt; MAX\_INDEX)

{

    // program code</code></pre><p>} /* end of while (index &lt; MAX_INDEX) */ // 指明该条while语句结束</p>
<p>} /* end of  if (...)*/ // 指明是哪条if语句结束</p>
</blockquote>
<h2 id="3-、标识符命名"><a href="#3-、标识符命名" class="headerlink" title="3 、标识符命名"></a>3 、标识符命名</h2><ol>
<li>所有标识符的命名均由有意义的英文单词组成。较长的英文单词可以缩写，但是缩写的单词要比较容易辨别它的意义。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>较短的单词可通过去掉”元音”形成缩写；较长的单词可取单词的头几个字母形成缩写；一些单词有大家公认的缩写。</p>
</blockquote>
<p><strong>示例：如下单词的缩写能够被大家基本认可。</strong></p>
<blockquote>
<p>temp 可缩写为  tmp  ;</p>
<p>flag 可缩写为  flg  ;</p>
<p>statistic 可缩写为  stat ;</p>
<p>increment 可缩写为  inc  ;</p>
<p>message 可缩写为  msg  ;</p>
<p><strong>规定的常用缩写如下：</strong></p>
</blockquote>
<hr>
<p>  常用词                缩写<br>  argument              arg<br>  buffer                buf<br>  clear                 clr<br>  clock                 clk<br>  compare               cmp<br>  configuration配置     cfg<br>  context               ctx<br>  delay                 dly<br>  device                dev<br>  disable               dis<br>  display               disp<br>  enable                en<br>  error                 err<br>  function              fnct<br>  hexadecimal十六进制   hex<br>  decimal十进制         dec<br>  initial               init<br>  maximum               max<br>  minimum               min<br>  multiplex             mux<br>  parameter             param<br>  previous以前（的）    pre<br>  pointer               ptr<br>  priority优先（级）    prio<br>  read                  rd<br>  ready                 rdy<br>  semaphore信号量       sem<br>  synchronize同步       sync<br>  timer                 tmr<br>  trigger               trig<br>  write                 wr</p>
<hr>
<ol start="2">
<li>命名中若使用特殊约定或缩写，则要有注释说明。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>应该在源文件的开始之处，对文件中所使用的缩写或约定，特别是特殊的缩写，进行必要的注释说明。</p>
</blockquote>
<ol start="3">
<li><strong>除非必要，不要用数字或较奇怪的字符来定义标识符。</strong></li>
</ol>
<p><strong>示例：</strong>如下命名，使人产生疑惑。</p>
<blockquote>
<p>#define _EXAMPLE_0_TEST_</p>
<p>#define _EXAMPLE_1_TEST_</p>
<p>void set_sls00( BYTE sls );</p>
<p>应改为有意义的单词命名</p>
<p>#define _EXAMPLE_UNIT_TEST_</p>
<p>#define _EXAMPLE_ASSERT_TEST_</p>
<p>void set_udt_msg_sls( BYTE sls );</p>
</blockquote>
<ol start="4">
<li>用正确的反义词组命名具有互斥意义的变量或相反动作的函数等。</li>
</ol>
<p><strong>说明：</strong>下面是一些在软件中常用的反义词组。</p>
<blockquote>
<p>add / remove        begin / end        create / destroy</p>
<p>insert / delete     first / last        get / release</p>
<p>increment / decrement                  put / get</p>
<p>add / delete        lock / unlock       open / close</p>
<p>min / max           old / new           start / stop</p>
<p>next / previous     source / target     show / hide</p>
<p>send / receive      source / destination</p>
<p>cut / paste         up / down</p>
</blockquote>
<p><strong>示例：</strong></p>
<blockquote>
<p>int  min_sum;</p>
<p>int  max_sum;</p>
<p>int  add_user( BYTE *user_name );</p>
<p>int  delete_user( BYTE *user_name );</p>
</blockquote>
<ol start="5">
<li>防止局部变量与公共变量同名。<strong>对于变量命名，禁止取单个字符（如i、j、k...），建议除了要有具体含义外，还能表明其变量类型、数据类型等，但i、j、k作局部循环变量是允许的</strong>。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>变量，尤其是局部变量，如果用单个字符表示，很容易敲错（如i写成j），而编译时又检查不出来，有可能为了这个小小的错误而花费大量的查错时间。</p>
<p><strong>示例：</strong></p>
<p>公认的变量作用域前缀</p>
<p>m_ ：类成员变量</p>
<p>g_ ：全局变量</p>
<p>s_ ：模块内静态变量</p>
<p>c_ ：常量</p>
<p>空 ：局部变量</p>
<p><strong>这样可以防止局部变量与全局变量重名。</strong></p>
</blockquote>
<ol start="6">
<li>使用一致的小写类型指示符作为前缀来区分变量的类型。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>常用变量类型前缀列表如下：</p>
<p>i : int m_iSum;</p>
<p>f : float</p>
<p>d : double</p>
<p>c : char</p>
<p>uc ： unsigned char 或 BYTE</p>
<p>l : long</p>
<p>p : pointer( 即 *)</p>
<p>b ： BOOL</p>
<p>h : HANDLE</p>
<p>w : unsigned short 或 WORD</p>
<p>dw ： DWORD 或 unsigned long</p>
<p>a : 数组：array of TYPE</p>
<p>str ： 字符串</p>
<p>t ： 结构类型</p>
</blockquote>
<ol start="7">
<li>结构体、联合体、枚举名的定义以T_开头，声明其一个变量的前缀统一以 t_ 开头。结构体、联合体、枚举必须被类型化。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>这样子让别人一看这个变量就是结构体，大概知道里面包含多个变量，易于和其它变量区分。</p>
<p><strong>例如</strong>：OpenCv里面的一个结构体IplROI声明如下：</p>
<p>//这样子定义一个结构体在后期使用时不太直观，无法感知IplROI就是一个结构体</p>
<p>typedef struct _IplROI</p>
<p>{</p>
<p>int coi; /* 0 - no COI (all channels are selected), 1 - 0th channel is selected ...*/</p>
<p>int xOffset;</p>
<p>int yOffset;</p>
<p>int width;</p>
<p>int height;</p>
<p>}</p>
<p>IplROI;</p>
<p>我们约定这样子声明：</p>
</blockquote>
<p><strong>正例：</strong></p>
<blockquote>
<p>typedef struct</p>
<p>{</p>
<p>int coi; /* 0 - no COI (all channels are selected), 1 - 0th channel is selected ...*/</p>
<p>int xOffset;</p>
<p>int yOffset;</p>
<p>int width;</p>
<p>int height;</p>
<p>}</p>
<p>T_IplROI;</p>
<p>//结构体、联合体、枚举必须被类型化</p>
<p>T_IplROI m_tIplROI; // m_t为前缀，m_为成员变量前缀，t为结构体标志前缀</p>
</blockquote>
<ol start="8">
<li>资源命名</li>
</ol>
<blockquote>
<p>格式如下：<strong>IDR(IDS、IDB、IDD、IDC)_rrr(资源名称)_mmm(所属模块名称)</strong></p>
<p>具体规则如下：</p>
<p><strong>字符串</strong>：以”<strong>IDS_</strong>“开头，例如：IDS_VIEW</p>
<p><strong>图片</strong>: 以”<strong>IDB_</strong>“开头，例如：IDB_COREICON</p>
<p><strong>对话框</strong>：以”<strong>IDD_</strong>“开头，例如：IDD_CORE</p>
<p><strong>对话框中的控件</strong>：以”<strong>IDC_控件简称</strong>“开头，</p>
<p>Menu Control : IDC_MENU_ 例如：IDC_MENU_SECURITY</p>
<p>Static Control : IDC_STATIC_ 例如：IDC_STATIC_MESSAGE</p>
<p>Icon View Control ： IDC_ICONV 例如：IDC_ICONV_CORE</p>
<p>List Control : IDC_LIST_ 例如：IDC_LIST_SETTINGS</p>
<p>Text Control ： IDC_TEXT_ 例如：IDC_TEXT_PIN</p>
<p>Image Control：IDC_IMAGE_ 例如：IDC_IMAGE_SECURITY</p>
<p>Date Control : IDC_DATE_ 例如：IDC_DATE_SETTINGS</p>
<p>Clock Control ：IDC_CLOCK_ 例如：IDC_CLOCK_VOLUME</p>
</blockquote>
<ol start="9">
<li>控件命名</li>
</ol>
<!-- -->

<p>1) 在类中定义的控件变量</p>
<blockquote>
<p>控件名 = ‘m_‘ + 控件缩写 + 代表控件含义的英文名</p>
<p><strong>例如：</strong></p>
<p>CButton m_btnSubmit; // m_为成员变量前缀，btn为CButton控件缩写</p>
</blockquote>
<p>2) 在普通函数中定义的控件变量</p>
<blockquote>
<p>控件名 = 控件缩写 +代表控件含义的英文名</p>
<p>CButton btnSubmit;</p>
</blockquote>
<ol start="10">
<li>完整的变量名命名规则为： 前缀+变量名主体，且变量名主体首字母必须大写。</li>
</ol>
<blockquote>
<p><strong>说明：</strong>各种前缀字符可以组合使用，但顺序应为：变量作用域前缀、变量类型前缀。</p>
<p><strong>例如：</strong>float g_fValue; // 类型为浮点型的全局变量</p>
<p>char *pcOldChar; //类型为字符指针的局部变量，*p为指针前缀，c为字符前缀</p>
</blockquote>
<ol start="11">
<li><strong>宏、常亮命都要使用大写字母，用下划线’_‘分割单词。预编译开关的定义使用下划线’_‘开始。</strong></li>
</ol>
<blockquote>
<p><strong>示例：</strong>如DISP_BUF_SIZE、MIN_VALUE、MAX_VALUE等等。</p>
</blockquote>
<ol start="12">
<li><strong>常量名必须用大写字母书写，单词之间用下划线分割。尽量使用const说明常量数据，对于宏定义的常数，必须指出其类型。</strong></li>
</ol>
<blockquote>
<p><strong>正例：</strong></p>
<p>const int MAX_COUNT = 1000;</p>
<p>#define MAX_COUNT (int)1000</p>
<p><strong>反例：</strong></p>
<p>#define MAX_COUNT 1000</p>
</blockquote>
<ol start="13">
<li><strong>函数的命名统一采用有意义的单词组成，并且首字母大写，这类似与微软MSDN中函数命名规则，好记也好看。</strong></li>
</ol>
<blockquote>
<p><strong>例如</strong>：SetValue(int iWidth,int iHeight)</p>
<p>{</p>
<p>…</p>
<p>}</p>
</blockquote>
<ol start="14">
<li><strong>类名采用大小写结合的方法。在构成类名的单词之间不用下划线，类名在开头加上C，类的成员变量统一在前面加m_前缀。</strong></li>
</ol>
<p><strong>例如：</strong></p>
<p>class ClanglibVocabulary； // 类名以’C’开头</p>
<blockquote>
<p>void Object::SetValue(int iWidth,int iHeight)</p>
<p>{</p>
<p>m_iWidth = iWidth; //类的成员变量统一在前面加m_前缀</p>
<p>m_iHeight = iHeight;</p>
<p>}</p>
</blockquote>
<ol start="15">
<li><strong>定义指针类型的变量，统一将 * 应该放在变量前。</strong></li>
</ol>
<blockquote>
<p><strong>正例：</strong></p>
<p>float *pfBuffer; <strong>// 这样子声明指针变量，清晰明了</strong></p>
<p><strong>反例：</strong></p>
<p>float* pfBuffer; <strong>// 这样子声明指针变量，不太直观</strong></p>
</blockquote>
<ol start="16">
<li><strong>严禁使用未经初始化的变量作为右值。</strong></li>
</ol>
<p><strong>说明：</strong>特别是在C/C++中引用未经赋值的指针，经常会引起系统崩溃。</p>
<h2 id="5、函数、过程"><a href="#5、函数、过程" class="headerlink" title="5、函数、过程"></a>5、函数、过程</h2><ol>
<li><strong>防止将函数的参数作为工作变量。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>将函数的参数作为工作变量，有可能错误地改变参数内容，所以很危险。对必须改变的参数，最好先用局部变量代之，最后再将该局部变量的内容赋给该参数。</p>
<p><strong>示例：</strong>下函数的实现不太好。</p>
<p>void sum_data( unsigned int <strong>num</strong>, int <strong>*data</strong>, int <strong>*sum</strong> )</p>
<p>{</p>
<pre><code>unsigned int count;



\*sum = 0;

for (count = 0; count \&lt; num; count++)

{

    \*sum  += data\[count\]; // sum成了工作变量，不太好。

}</code></pre><p>}</p>
<p>若改为如下，则更好些。</p>
<p>void sum_data( unsigned int <strong>num</strong>, int <strong>*data</strong>, int <strong>*sum</strong> )</p>
<p>{</p>
<pre><code>unsigned int count ;

int sum\_temp;



sum\_temp = 0;

for (count = 0; count \&lt; num; count ++)

{

    sum\_temp  += data\[count\];

}



\*sum = sum\_temp;</code></pre><p>}</p>
</blockquote>
<ol start="2">
<li><strong>为简单功能编写函数。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>虽然为仅用一两行就可完成的功能去编函数好象没有必要，但用函数可使功能明确化，增加程序可读性，亦可方便维护、测试。</p>
<p><strong>示例：</strong>如下语句的功能不很明显。</p>
<p>value = ( a &gt; b ) ? a : b ;</p>
<p>改为如下就很清晰了。</p>
<p>int max (int a, int b)</p>
<p>{</p>
<pre><code>return ((a \&gt; b) ? a : b);</code></pre><p>}</p>
<p>value = max (a, b);</p>
<p>或改为如下。</p>
<p>#define MAX (a, b) (((a) &gt; (b)) ? (a) : (b))</p>
<p>value = MAX (a, b);</p>
</blockquote>
<ol start="3">
<li><strong>避免使用无意义或含义不清的动词为函数命名。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>避免用含义不清的动词如process、handle等为函数命名，因为这些动词并没有说明要具体做什么。</p>
</blockquote>
<ol start="4">
<li><strong>如果参数是指针，且仅作输入用，则应该在类型前面加const。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>这样子，可以防止该指针在函数体内被意外修改。</p>
<p><strong>正例：</strong></p>
<p>int GetStrLen(const char *pcString); <strong>// 指明该指针只允许读，不可以改变其值</strong></p>
</blockquote>
<ol start="5">
<li><strong>避免函数有太多的参数，参数个数尽量控制在5个以内。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>如果参数太多，在使用时很容易将参数类型或顺序搞错，而且调用的时候也不方便。如果参数的确比较多，而且输入的参数互相之间的关系比较紧密，不妨把这些参数定义成一个结构体，然后把结构体的指针当成参数输入。</p>
</blockquote>
<h2 id="6、可靠性"><a href="#6、可靠性" class="headerlink" title="6、可靠性"></a>6、可靠性</h2><ol>
<li><strong>编程时，要防止差1错误。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>此类错误一般是由于把”&lt;=”误写成”&lt;“或”&gt;=”误写成”&gt;“等造成的，由此引起的后果，很多情况下是很严重的，所以编程时，一定要在这些地方小心。当编完程序后，应对这些操作符进行彻底检查。</p>
</blockquote>
<ol start="2">
<li><strong>防止内存操作越界。对变量进行赋值时，必须对其值进行合法性检查，防止越界等现象发生。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>内存操作主要是指对数组、指针、内存地址等的操作。内存操作越界是软件系统主要错误之一，后果往往非常严重，所以当我们进行这些操作时一定要仔细小心。</p>
<p>尤其对全局变量赋值时，应进行合法性检查，以提高代码的可靠性、稳定性。</p>
<p>例如灰度直方图的统计</p>
<p>BYTE *pGray[255]</p>
<p>int grayVal;</p>
<p>grayVal = .….</p>
<p>int num = pGray[grayVal];</p>
</blockquote>
<ol start="3">
<li><strong>有可能的话，if语句尽量加上else分支，对没有else分支的语句要小心对待；switch语句必须有default分支。</strong></li>
</ol>
<!-- -->

<ol start="4">
<li><strong><em>注意变量取值范围。</em></strong></li>
</ol>
<blockquote>
<p><strong>示例：</strong>如下程序将造成变量下溢。</p>
<p>unsigned char size ;</p>
<p>while (size-- &gt;= 0) // 将出现下溢</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
<p>当size等于0时，再减1不会小于0，而是0xFF，故程序是一个死循环。应如下修改。</p>
<p>signed char size; // 从unsigned char 改为signed char</p>
<p>while (size-- &gt;= 0)</p>
<p>{</p>
<pre><code>\... // program code</code></pre><p>}</p>
</blockquote>
<ol start="5">
<li><strong><em>使用变量时要注意其边界值的情况。</em></strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>如C语言中字符型变量，有效值范围为-128到127。故以下表达式的计算存在一定风险。</p>
</blockquote>
<p><strong>示例：</strong></p>
<blockquote>
<p>char chr = 127;</p>
<p>int sum = 200;</p>
<p>chr += 1; // 127为chr的边界值，再加1将使chr上溢到-128，而不是128。</p>
<p>sum += chr; // 故sum的结果不是328，而是72。</p>
<p>// 若chr与sum为同一种类型，或表达式按如下方式书写，可能会好些。</p>
<p>sum = sum + chr + 1;</p>
</blockquote>
<ol start="6">
<li><strong>必须对动态申请的内存做有效性检查，并进行初始化；动态内存的释放必须和分配成对存在，以防止内存泄露，释放后内存指针要置为NULL。</strong></li>
</ol>
<blockquote>
<p><strong>说明：</strong>指针释放后，该指针可能还是指向原有的内存块，可能不是，但它已经变成了一个野指针，一般用户不会对它再操作，但用户失误情况下对它的操作可能导致程序崩溃。</p>
<p><strong>示例：</strong></p>
<p>MemoryFunction(void)</p>
<p>{</p>
<p>Unsigned char *pucBuffer=NULL;</p>
<p>pucBuffer = GetBuffer(sizeof(DWORD));</p>
<p>if( NULL != pucBuffer) <strong>// 申请的内存指针必须进行有效性验证</strong></p>
<p>{</p>
<p><strong>// 申请的内存使用前必须进行初始化</strong></p>
<p>memset(pucBuffer,0xFF,sizeof(DWORD));</p>
<p>}</p>
<p>…</p>
<p>FreeBuffer(pucBuffer); <strong>// 申请的内存使用完毕必须释放</strong></p>
<p>pucBuffer = NULL; <strong>// 申请的内存释放后指针置为空</strong></p>
<p>…</p>
<p>}</p>
<p>If( p != NULL)</p>
<p>{</p>
<p>Delete [] p</p>
<p>P = NULL</p>
<p>}</p>
<p>P = new int [255];</p>
</blockquote>
<ol start="7">
<li><p><strong>指针类型变量必须初始化为NULL。</strong></p>
</li>
<li><p><strong>尽量用乘法或其它方法代替除法，特别是浮点运算中的除法</strong></p>
</li>
</ol>
<blockquote>
<p>说明：浮点运算除法要占用较多CPU资源。</p>
<p>示例：如下表达式运算可能要占较多CPU资源。</p>
<p>#define PAI 3.1416</p>
<p>radius = circle_length / (2 * PAI);</p>
<p>应如下<strong>把浮点除法改为浮点乘法</strong>。</p>
<p><strong>#define PAI_RECIPROCAL (1 / 3.1416 ) // 编译器编译时，将生成具体浮点数</strong></p>
<p><strong>radius = circle_length * PAI_RECIPROCAL / 2;</strong></p>
</blockquote>
<h2 id="7、宏"><a href="#7、宏" class="headerlink" title="7、宏"></a>7、宏</h2><ol>
<li>用宏定义表达式时，要使用完备的括号。</li>
</ol>
<blockquote>
<p><strong>示例：</strong>如下定义的宏都存在一定的风险。</p>
<p>#define RECTANGLE_AREA ( a, b ) a * b</p>
<p>#define RECTANGLE_AREA ( a, b ) (a * b)</p>
<p>#define RECTANGLE_AREA ( a, b ) (a) * (b)</p>
<p><strong>正确的定义应为：</strong></p>
<p>#define RECTANGLE_AREA ( a, b ) ((a) * (b))</p>
<p>#define PACC 100+200</p>
<p>int num = PACC *10;</p>
</blockquote>
<ol start="2">
<li><strong>使用宏时，不允许参数发生变化。</strong></li>
</ol>
<blockquote>
<p>示例：如下用法可能导致错误。</p>
<p>#define SQUARE( a ) ((a) * (a))</p>
<p>int a = 5;</p>
<p>int b;</p>
<p>b = SQUARE( a++ ); // 结果：a = 7，即执行了两次增1。</p>
<p>正确的用法是：</p>
<p>b = SQUARE( a );</p>
<p>a++; // 结果：a = 6，即只执行了一次增1。</p>
</blockquote>
<h2 id="8、参考文献（简单罗列）"><a href="#8、参考文献（简单罗列）" class="headerlink" title="8、参考文献（简单罗列）"></a>8、参考文献（简单罗列）</h2><ol>
<li><p>《软件编程规范》，<a href="http://www.doc88.com/p-67549398339.html" target="_blank" rel="noopener">[http://www.doc88.com/p-67549398339.html]{.underline}</a></p>
</li>
<li><p>《华为编程总规则》，<a href="http://wenku.baidu.com/view/1be045d249649b6648d7476d.html" target="_blank" rel="noopener">[http://wenku.baidu.com/view/1be045d249649b6648d7476d.html]{.underline}</a></p>
</li>
<li><p>《C++软件开发编程规范》，<a href="http://download.csdn.net/download/sunyanjie/3054454" target="_blank" rel="noopener">[http://download.csdn.net/download/sunyanjie/3054454]{.underline}</a></p>
</li>
<li><p>《华为软件编程规范》，</p>
</li>
</ol>
<p><a href="http://www.eefocus.com/guobinggen/blog/2012-05/209725_e8029.html" target="_blank" rel="noopener">[http://www.eefocus.com/guobinggen/blog/2012-05/209725_e8029.html]{.underline}</a></p>
<h2 id="9、软件容错方法"><a href="#9、软件容错方法" class="headerlink" title="9、软件容错方法"></a>9、软件容错方法</h2><p>软件容错的方法，这里主要列举了两种：</p>
<ol>
<li><p>用断言ASSERT_REPORT( expr )；</p>
</li>
<li><p>C++语言中用 try_except 处理法、try_finally中止法</p>
</li>
</ol>
<!-- -->

<ol>
<li>用断言ASSERT_REPORT( expr )；</li>
</ol>
<p>在使用的断言的过程中会有一些我们应该注意的事项和养成一些良好的习惯，如：</p>
<ol>
<li><strong>每个</strong>ASSERT_REPORT<strong>只检验一个条件，因为同时检验多个条件时，如果断言失败，我们就无法直观的判断是哪个条件失败</strong></li>
</ol>
<blockquote>
<p><strong>例如：</strong></p>
<p>不好 : ASSERT_REPORT (nOffset&gt;=0 &amp;&amp; nOffset+nSize&lt;=m_nInfomationSize);</p>
<p>好 : ASSERT_REPORT (nOffset &gt;= 0);<br>ASSERT_REPORT (nOffset+nSize &lt;= m_nInfomationSize);</p>
</blockquote>
<ol start="2">
<li><p>ASSERT_REPORT<strong>和后面的语句应空一行，以形成逻辑和视觉上的一致感，也算是一种良好的编程习惯吧，让编写的代码有一种视觉上的美感</strong></p>
</li>
<li><p><strong>有的地方，</strong>ASSERT_REPORT<strong>不能代替条件过滤</strong></p>
</li>
<li><p><strong>不能使用改变环境的语句,因为</strong>ASSERT_REPORT<strong>只在DEBUG个生效,如果这么做,会使用程序在真正运行时遇到问题</strong><br> <strong>例如：</strong></p>
</li>
</ol>
<blockquote>
<p><strong>错误:</strong> ASSERT_REPORT (i++ &lt; 100)<br>这是因为如果出错，比如在执行之前i=100,那么这条语句就不会执行，那么i++这条命令就没有执行。</p>
<p><strong>正确:</strong> ASSERT_REPORT (i &lt; 100)<br>i++;</p>
</blockquote>
<ol start="5">
<li><strong>注意事项：</strong></li>
</ol>
<p><strong>使用</strong>ASSERT_REPORT<strong>的缺点是，频繁的调用会极大的影响程序的性能，增加额外的开销。所以这里的做法是：在Debug下编译的，自动开启断言；在Release下编译的，自动关闭断言。（即：</strong>ASSERT_REPORT<strong>只有在Debug版本中才有效，如果编译为Release版本则被忽略掉。）</strong></p>
<p>重新写的断言函数ASSERT_REPORT( expr )实现的功能是：</p>
<p>程序出错时：列出在哪个程序、哪个文件、哪个函数、哪条表达式、哪行，可以快速定位那里出错，方便调试。</p>
<p>效果如下：</p>
<p><img src="media/image1.png" alt="">{width=”5.166666666666667in” height=”4.604166666666667in”}</p>
<p>具体使用方法：</p>
<p><strong>例子1：</strong></p>
<p>#include &quot;ASSERT_REPORT.H&quot;</p>
<p>void CtestAssertReportDlg::OnBnClickedButton1()</p>
<p>{</p>
<p>int *p;</p>
<p>p=NULL;</p>
<p>ASSERT_REPORT(p!=NULL);</p>
<p>}</p>
<p><strong>例子2：在函数开始处检验传入参数的合法性</strong></p>
<p>int resetBufferSize(int nNewSize)<br>{<br>  //功能:改变缓冲区大小,<br>  //参数:nNewSize 缓冲区新长度<br>  //返回值:缓冲区当前长度<br>  //说明:保持原信息内容不变     nNewSize&lt;=0表示清除缓冲区<br>  ASSERT_REPORT (nNewSize &gt;= 0);<br>  ASSERT_REPORT (nNewSize &lt;= MAX_BUFFER_SIZE);</p>
<p>  ...<br>}</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>yigmmk
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://programnotes.cn/coding%20standard/" title="Coding Standard">https://programnotes.cn/coding standard/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/Image/WeChat.jpg">
            <span class="icon">
              <i class="wechat"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/hexo-command/" rel="prev" title="hexo command">
      <i class="fa fa-chevron-left"></i> hexo command
    </a></div>
      <div class="post-nav-item">
    <a href="/install-typora-in-Ubuntu/" rel="next" title="install typora in Ubuntu">
      install typora in Ubuntu <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、排版"><span class="nav-number">1.</span> <span class="nav-text">1、排版</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、注释"><span class="nav-number">2.</span> <span class="nav-text">2、注释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-、标识符命名"><span class="nav-number">3.</span> <span class="nav-text">3 、标识符命名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、函数、过程"><span class="nav-number">4.</span> <span class="nav-text">5、函数、过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、可靠性"><span class="nav-number">5.</span> <span class="nav-text">6、可靠性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、宏"><span class="nav-number">6.</span> <span class="nav-text">7、宏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、参考文献（简单罗列）"><span class="nav-number">7.</span> <span class="nav-text">8、参考文献（简单罗列）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、软件容错方法"><span class="nav-number">8.</span> <span class="nav-text">9、软件容错方法</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yigmmk"
      src="/Image/logo.png">
  <p class="site-author-name" itemprop="name">yigmmk</p>
  <div class="site-description" itemprop="description">learn &  share & note</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">91</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yiGmMk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yiGmMk" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:support@programnotes.cn" title="E-Mail → mailto:support@programnotes.cn"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">闽ICP备16032016号-1 </a>
      <img src="/images/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=16032016" rel="noopener" target="_blank">闽公安网备16032016 </a>
  </div>

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yiGmMk 闽ICP备16032016号-1</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">68k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:02</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'fcf73fdf87327a259978',
      clientSecret: 'ebe0512fd10af5e7b10228ce7b1e0bfd1cb488a9',
      repo        : 'comment_blog',
      owner       : 'yiGmMk',
      admin       : ['yiGmMk'],
      id          : 'b848a5cc96f09b1759bdf058a7927259',
        language: 'en',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
