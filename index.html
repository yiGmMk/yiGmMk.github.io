<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo_32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo_16x16.ico">
  <link rel="mask-icon" href="/Image/logo.svg" color="#222">
  <meta name="google-site-verification" content="MgR0aDkBeiFlwv-i7xHYUBNI-L9y-pnZ44VnTE37AAg">
  <meta name="msvalidate.01" content="B6FE76A783A1770409EC903DE2C7AC6A">
  <meta name="baidu-site-verification" content="pGt0Y3hHUQ">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"programnotes.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"changyan | disqus | disqusjs | gitalk | livere | valine","storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="learn &amp; share &amp; note">
<meta property="og:type" content="website">
<meta property="og:title" content="编程笔记">
<meta property="og:url" content="https://programnotes.cn/index.html">
<meta property="og:site_name" content="编程笔记">
<meta property="og:description" content="learn &amp; share &amp; note">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yigmmk">
<meta property="article:tag" content="OpenCV;Golang;Tensorflow;Deep Learning;Distributed System">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://programnotes.cn/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>编程笔记</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?933db492079d69649381bedb23856044";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">编程笔记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">lifelong learning & practice makes perfect</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/index.html" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">95</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">123</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="sitemap fa-fw"></i>站点地图</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    

  <a href="https://github.com/yiGmMk" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/network-tool/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/network-tool/index.html" class="post-title-link" itemprop="url">网络|组网工具-tailscale</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-21 00:00:00" itemprop="dateCreated datePublished" datetime="2024-03-21T00:00:00+08:00">2024-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是-tailscale"><a href="#什么是-tailscale" class="headerlink" title="什么是 tailscale"></a>什么是 tailscale</h2><p><a href="https://github.com/tailscale/tailscale" target="_blank" rel="noopener">Tailscale</a> 是一个开源的 VPN 服务器，它允许用户使用自己的互联网连接来创建一个安全的、无备案的 VPN 网络。</p>
<h3 id="direct-vs-relayed-connection"><a href="#direct-vs-relayed-connection" class="headerlink" title="direct vs relayed connection"></a>direct vs relayed connection</h3><p><a href="https://tailscale.com/kb/1257/connection-types" target="_blank" rel="noopener">直连和中继网络的区别</a>,如果建立连接后不同终端间的网络延迟很大,可检查下是否使用了中继节点(relay),考虑使用direct connection优化延迟<br>经测试,relay模式延迟300ms左右情况下,改用direct模式延迟在10ms左右</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前节点,网络状态</span></span><br><span class="line">tailscale status</span><br><span class="line"><span class="comment"># 如下是直连模式:direct connection</span></span><br><span class="line"><span class="comment"># xxxxx windows active; direct 27.xx.xxx.xxxx:xxxx, tx xxxxx rx 18832</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用ping 或 tailscale ping xxxx,查看延迟</span></span><br><span class="line">ping xxx</span><br></pre></td></tr></table></figure>

<p>relayed connection可能的优化:<br>在某个节点的防火墙放开UDP协议的41641端口</p>
<h3 id="都没有公网ip的节点间延迟优化"><a href="#都没有公网ip的节点间延迟优化" class="headerlink" title="都没有公网ip的节点间延迟优化"></a>都没有公网ip的节点间延迟优化</h3><p>偶尔使用还是ssh方便</p>
<h4 id="ssh端口转发"><a href="#ssh端口转发" class="headerlink" title="ssh端口转发"></a>ssh端口转发</h4><p>上一级提到过,有公网ip的服务器可以通过开启UDP协议的41641端口建立direct connection,减少节点间的网络延迟,<br>在两台设备都没有公网固定ip的情况下,尝试在同样开启端口没有效果,延迟仍然很大(300~1000ms)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看网络情况</span></span><br><span class="line">tailscale netcheck                                                                      (base) </span><br><span class="line"></span><br><span class="line">Report:</span><br><span class="line">    * UDP: <span class="literal">true</span></span><br><span class="line">    * IPv4: yes, 27.38.xxx.xxxx:xxxx</span><br><span class="line">    * IPv6: no, but OS has support</span><br><span class="line">    * MappingVariesByDestIP: <span class="literal">true</span></span><br><span class="line">    * HairPinning: <span class="literal">false</span></span><br><span class="line">    * PortMapping: </span><br><span class="line">    * Nearest DERP: San Francisco</span><br><span class="line">    * DERP latency:</span><br><span class="line">            - sfo: 175ms   (San Francisco)</span><br><span class="line">            - lax: 175.9ms (Los Angeles)</span><br><span class="line">            - tok: 184.4ms (Tokyo)</span><br><span class="line">            - dfw: 192.6ms (Dallas)</span><br><span class="line">            - ord: 205.8ms (Chicago)</span><br><span class="line">            - tor: 218.1ms (Toronto)</span><br><span class="line">            - hkg: 220.6ms (Hong Kong)</span><br><span class="line">            - hnl: 222ms   (Honolulu)</span><br><span class="line">            - nyc: 223.9ms (New York City)</span><br><span class="line">            - fra: 231.7ms (Frankfurt)</span><br><span class="line">            - sin: 238ms   (Singapore)</span><br><span class="line">            - waw: 249.2ms (Warsaw)</span><br><span class="line">            - par: 254.3ms (Paris)</span><br><span class="line">            - ams: 257.3ms (Amsterdam)</span><br><span class="line">            - lhr: 265ms   (London)</span><br><span class="line">            - mad: 271.1ms (Madrid)</span><br><span class="line">            - sao: 343ms   (São Paulo)</span><br><span class="line">            - dbi: 350.9ms (Dubai)</span><br><span class="line">            - syd: 382.2ms (Sydney)</span><br><span class="line">            - jnb: 420.1ms (Johannesburg)</span><br><span class="line">            - nai: 464.5ms (Nairobi)</span><br><span class="line">            - blr:         (Bangalore)</span><br><span class="line">            - sea:         (Seattle)</span><br><span class="line">            - den:         (Denver)</span><br><span class="line">            - mia:         (Miami)</span><br></pre></td></tr></table></figure>

<p>可以看到通过derp单程最短延迟在170ms+,roundtrip至少延迟300ms</p>
<p>此时如果有一个公网ip的节点,可以尝试将它作为中继节点,将其他节点连接到它上,这样其他节点的网络延迟就会变小<br>例如使用ssh的端口转发,a,b是没有固定公网ip的节点,c是公网ip的节点,c和a,c和b之间均可以建立direct connection,延迟很<br>小在10ms左右<br>通过ssh本地端口转发将本地请求通过c转发到b,这样a和b就可以直连了,<a href="https://zhuanlan.zhihu.com/p/148825449" target="_blank" rel="noopener">参考这篇文章</a></p>
<h4 id="自建DERP节点"><a href="#自建DERP节点" class="headerlink" title="自建DERP节点"></a>自建DERP节点</h4><p><a href="https://zhuanlan.zhihu.com/p/638910565" target="_blank" rel="noopener">参考</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://tailscale.com/kb/1257/connection-types" target="_blank" rel="noopener">tailscale</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/630841212" target="_blank" rel="noopener">知乎</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/148825449" target="_blank" rel="noopener">知乎,ssh 端口转发</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/638910565" target="_blank" rel="noopener">自建derp节点</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/ai-stable-diffusion/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/ai-stable-diffusion/index.html" class="post-title-link" itemprop="url">玩转大模型|Stable Diffusion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-10 00:00:00" itemprop="dateCreated datePublished" datetime="2024-03-10T00:00:00+08:00">2024-03-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>484</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>Stable Diffusion（稳定扩散）严格说来它是一个由几个组件（模型）构成的系统，而非单独的一个模型</p>
<ul>
<li><a href="https://www.comflowy.com/zh-CN/basics/stable-diffusion-foundation" target="_blank" rel="noopener">原理</a></li>
</ul>
<h3 id="VAE"><a href="#VAE" class="headerlink" title="VAE"></a>VAE</h3><h3 id="CLIP"><a href="#CLIP" class="headerlink" title="CLIP"></a>CLIP</h3><h2 id="ComfyUI"><a href="#ComfyUI" class="headerlink" title="ComfyUI"></a>ComfyUI</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/comfyanonymous/ComfyUI.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ComfyUI</span><br><span class="line"></span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 </span></span><br><span class="line">python main.py</span><br></pre></td></tr></table></figure>

<p>此时目录下还没有模型，需要下载模型到指定目录: ComfyUI/models/checkpoints</p>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><h4 id="ComfyUI-Manager"><a href="#ComfyUI-Manager" class="headerlink" title="ComfyUI Manager"></a>ComfyUI Manager</h4><p>在 custom_nodes 目录下,下载插件代码</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> custom_nodes</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/ltdrdata/ComfyUI-Manager.git</span><br></pre></td></tr></table></figure>

<h4 id="workspace-manger"><a href="#workspace-manger" class="headerlink" title="workspace-manger"></a>workspace-manger</h4><p><a href="https://github.com/11cafe/comfyui-workspace-manager" target="_blank" rel="noopener">workflow 管理/切换插件</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://github.com/comfyanonymous/ComfyUI" target="_blank" rel="noopener">ComfyUI</a></li>
<li><a href="https://www.comflowy.com/zh-CN/introduction/new-to-comflowy" target="_blank" rel="noopener">comflowy,中文教程</a></li>
</ul>
<h2 id="模型下载"><a href="#模型下载" class="headerlink" title="模型下载"></a>模型下载</h2><h3 id="sd模型"><a href="#sd模型" class="headerlink" title="sd模型"></a>sd模型</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axel https://civitai.com/models/112902/dreamshaper-xl</span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://huggingface.co/stabilityai" target="_blank" rel="noopener">huggingface</a></li>
<li><a href="https://www.comflowy.com/zh-CN/model" target="_blank" rel="noopener">comflowy,模型推荐</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/vscode-portable-mode/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/vscode-portable-mode/index.html" class="post-title-link" itemprop="url">vscode|下载老版本解决(1.86.x起)服务器不兼容问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-02-17 00:00:00" itemprop="dateCreated datePublished" datetime="2024-02-17T00:00:00+08:00">2024-02-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>496</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>VSCode从V1.86起对部分服务器不兼容(remote ssh),出现类似报错</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You are connected to an OS version that is unsupported by Visual Studio Code</span><br></pre></td></tr></table></figure>

<p>原因可参考<a href="https://code.visualstudio.com/docs/remote/linux#_remote-host-container-wsl-linux-prerequisites" target="_blank" rel="noopener">文档</a>,从报错提示看,<br>大部分人遇到的情况是GLIBC版本过低,而VSCode要求版本&gt;=2.28,这是vscode的依赖nodejs要求的</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本要求 kernel &gt;= 4.18, glibc &gt;=2.28, libstdc++ &gt;= 3.4.25, Python 2.6 or 2.7, tar</span></span><br><span class="line"><span class="comment"># 可以通过如下命令查看glibc版本</span></span><br><span class="line">ldd  --ersion</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看libstdc++ 3.4.25 是否可用</span></span><br><span class="line">strings /usr/lib64/libstdc++.so.6 | grep GLIBCXX</span><br></pre></td></tr></table></figure>

<p>可以升级服务器版本或者降低VSCode版本来解决</p>
<h2 id="老版本"><a href="#老版本" class="headerlink" title="老版本"></a>老版本</h2><p>VSCode支持<a href="https://code.visualstudio.com/docs/editor/portable#_enable-portable-mode" target="_blank" rel="noopener">Portable Mode</a>,可以同时安装多个版本,多个版本建</p>
<h3 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h3><ul>
<li><a href="https://code.visualstudio.com/docs/supporting/faq#_previous-release-versions" target="_blank" rel="noopener">官方</a></li>
<li><a href="https://vscode.download.prss.microsoft.com/dbazure/download/stable/8b3775030ed1a69b13e4f4c628c612102e30a681/VSCode-win32-x64-1.85.2.zip" target="_blank" rel="noopener">官方,1.85.2版本下载</a></li>
<li>123网盘下载 <a href="https://www.123pan.com/s/nPH8jv-EJi8H.html" target="_blank" rel="noopener">https://www.123pan.com/s/nPH8jv-EJi8H.html</a> 提取码:mBgZ</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/aliyun-activity/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/aliyun-activity/index.html" class="post-title-link" itemprop="url">阿里云|学Mysql送200元等价奖励</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-12-24 00:00:00" itemprop="dateCreated datePublished" datetime="2023-12-24T00:00:00+08:00">2023-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>304</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="参与链接"><a href="#参与链接" class="headerlink" title="参与链接"></a>参与链接</h2><p><a href="https://edu.aliyun.com/learning/topic/RDS-Serverless-buy?clubTaskBiz=subTask..10998022..10188..&share_source=copy_link" target="_blank" rel="noopener">活动连接</a></p>
<h3 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h3><p>需要账号是RDS首购才能拿到奖励,不清楚的可进钉钉群问,需要购买7天的Mysql套餐(54元)</p>
<h3 id="奖励"><a href="#奖励" class="headerlink" title="奖励"></a>奖励</h3><p>限首购用户】前2000名完成阶段二的：【任务1-产品开通】、【任务2-动手实验】、【任务3-动手实验】，可获得价值200元的冬日暖心礼盒：100元电话充值卡+定制办公礼（保温杯、笔记本、签字笔），任务1开通的产品7天到期自动会释放，鼓励根据学习内容多进行产品体验实践，若用户提前手动释放，则视为放弃领奖资格（入群填写信息，活动结束后统一发放）</p>
<p><img src="https://image-1252731913.cos.ap-guangzhou.myqcloud.com/blog-img/bc3f909dae9b5ba6adafe5872997e6cd.png" alt="任务"></p>
<h4 id="任务1-产品开通"><a href="#任务1-产品开通" class="headerlink" title="任务1-产品开通"></a>任务1-产品开通</h4><p>购买54这款即可,不需要做为何更改</p>
<p><img src="https://image-1252731913.cos.ap-guangzhou.myqcloud.com/blog-img/3d43a09181e26bd8685ab2fd38cdfa40.png" alt="购买54这款即可,不需要做为何更改"></p>
<h4 id="任务2-3-动手实验"><a href="#任务2-3-动手实验" class="headerlink" title="任务2/3-动手实验"></a>任务2/3-动手实验</h4><p>按照实验手册一步步操作即可,官方会提供资源,页面上的浏览器有点卡顿需要耐心操作</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/aliyun-try/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/aliyun-try/index.html" class="post-title-link" itemprop="url">阿里云|白嫖服务器/数据库各种云产品</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-12-24 00:00:00" itemprop="dateCreated datePublished" datetime="2023-12-24T00:00:00+08:00">2023-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>89</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>阿里云新账号可使用各种云产品</p>
<h2 id="试用链接"><a href="#试用链接" class="headerlink" title="试用链接"></a>试用链接</h2><p><a href="https://free.aliyun.com?userCode=yg16efsq" target="_blank" rel="noopener">免费试用</a></p>
<p><img src="https://image-1252731913.cos.ap-guangzhou.myqcloud.com/blog-img/f12844d8a51b4e64691fd754a67c93c1.png" alt="资源"></p>
<h2 id="新购优惠"><a href="#新购优惠" class="headerlink" title="新购优惠"></a>新购优惠</h2><p><a href="https://www.aliyun.com/daily-act/ecs/activity_selection?userCode=yg16efsq" target="_blank" rel="noopener">服务器</a></p>
<p><a href="https://www.aliyun.com/activity?userCode=yg16efsq" target="_blank" rel="noopener">最新活动</a></p>
<h2 id="企业专享优惠"><a href="#企业专享优惠" class="headerlink" title="企业专享优惠"></a>企业专享优惠</h2><p>阿里云创业者计划是面向初创企业推出的一项扶持计划，致力于为初创企业构建智能时代的核心竞争力。</p>
<p><a href="https://www.aliyun.com/benefit/developer/company?userCode=yg16efsq" target="_blank" rel="noopener">企业优惠</a></p>
<p><img src="https://image-1252731913.cos.ap-guangzhou.myqcloud.com/blog-img/da268ec3eda9b95870dd5cfe6cd7a631.png" alt="99元服务器"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/ai|local-knowledge/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/ai%7Clocal-knowledge/index.html" class="post-title-link" itemprop="url">大语言模型构建本地知识库(RAG)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-27 00:00:00" itemprop="dateCreated datePublished" datetime="2023-10-27T00:00:00+08:00">2023-10-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><h3 id="LLM-大语言模型"><a href="#LLM-大语言模型" class="headerlink" title="LLM/大语言模型"></a>LLM/大语言模型</h3><p>大语言模型（英文：Large Language Model，缩写LLM）是一种人工智能模型，旨在理解和生成人类语言。它们在大量的文本数据上进行训练，可以执行广泛的任务，包括文本总结、翻译、情感分析等等。LLM的特点是规模庞大，包含数十亿的参数</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/ai%7Clocal-knowledge/index.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/mysql-collate/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/mysql-collate/index.html" class="post-title-link" itemprop="url">mysql字符集|为什么有时候mysql不区分大小写</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-27 00:00:00" itemprop="dateCreated datePublished" datetime="2023-10-27T00:00:00+08:00">2023-10-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="为什么有时候mysql不区分大小写"><a href="#为什么有时候mysql不区分大小写" class="headerlink" title="为什么有时候mysql不区分大小写"></a>为什么有时候mysql不区分大小写</h2><p>业务要求一个数据必须是唯一的,通过</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> xx,<span class="keyword">count</span>(*) <span class="keyword">from</span> xxx <span class="keyword">group</span> <span class="keyword">by</span> xx</span><br></pre></td></tr></table></figure>
<p>发现有重复数据,进一步发现有的其实不是重复,大小写不同,这就引出一个问题:为什么有时候mysql不区分大小写</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/mysql-collate/index.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/vscode-go-test/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/vscode-go-test/index.html" class="post-title-link" itemprop="url">vscode|go测试调试配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-10-17 00:00:00" itemprop="dateCreated datePublished" datetime="2023-10-17T00:00:00+08:00">2023-10-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="单测"><a href="#单测" class="headerlink" title="单测"></a>单测</h2><p>在vscode中,带_test的go源文件里的测试函数有有专门的优化,可点击”run test”,”debug test”一键测试</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在settings.json可以指定go buld参数如ldfalgs,gcflags等</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">"go.buildFlags": [</span><br><span class="line">    <span class="string">"--ldflags -r=$&#123;workspaceRoot&#125;/lib"</span>    <span class="comment">// works for 'debug test' but not 'run test'</span></span><br><span class="line">    <span class="comment">// "-ldflags=-r $&#123;workspaceRoot&#125;/lib"  // works for 'run test' but not 'debug test'</span></span><br><span class="line">],</span><br><span class="line">"go.buildTags": "linux",</span><br><span class="line">"gopls": &#123;</span><br><span class="line">    "build.buildFlags": [</span><br><span class="line">        "-tags=linux",</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/vscode-go-test/index.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/go-gopls-optimize/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/go-gopls-optimize/index.html" class="post-title-link" itemprop="url">Go|gopls史诗级更新-优化编译及内存占用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-09-17 00:00:00" itemprop="dateCreated datePublished" datetime="2023-09-17T00:00:00+08:00">2023-09-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="gopls"><a href="#gopls" class="headerlink" title="gopls"></a>gopls</h2><p> gopls是go官方维护的工具,提供代码提示,补全,格式化等诸多功能,之前的版本在vscode+wsl里使用,内存/cpu占<br>用都不小,大项目打开时容易卡顿.<br> <a href="https://go.dev/blog/gopls-scalability" target="_blank" rel="noopener">在2023.9.8官方发文</a>提到了新版本所做的优化和实现原理,更新<br>体验了下,确实有明显的体验提升.</p>
<p>使用以下命令更新</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go install golang.org/x/tools/gopls@latest</span><br></pre></td></tr></table></figure>

<p>目前最新版本是 golang.org/x/tools/gopls v0.13.2</p>
<h2 id="更新内容"><a href="#更新内容" class="headerlink" title="更新内容"></a>更新内容</h2><h3 id="Reductions-in-memory-use-and-startup-time"><a href="#Reductions-in-memory-use-and-startup-time" class="headerlink" title="Reductions in memory use and startup time"></a>Reductions in memory use and startup time</h3><p>减少内存占用,启动时间,官方测试了28个github上流行的项目大部分可减少60%~80%的内存占用</p>
<blockquote>
<p>Across these repos, the savings average around 75%, but memory reductions are non-linear: as projects get larger, so does the relative decrease in memory usage. We’ll explain this in more detail below.</p>
</blockquote>
<p>在这些存储库中，平均节省约75%，但内存减少是非线性的：随着项目变大，内存使用的相对减少也是如此</p>
<h3 id="Separate-compilation"><a href="#Separate-compilation" class="headerlink" title="Separate compilation"></a>Separate compilation</h3><p>之前,go原本最小的编译单位是package,为了获取import的package信息,需要将所有import的package提前编译好</p>
<p>在v0.12开始通过使用package summary和file-based cache优化最小编译单元,使gopls可以重用部分已编译的package</p>
<h3 id="Fine-grained-invalidation"><a href="#Fine-grained-invalidation" class="headerlink" title="Fine-grained invalidation"></a>Fine-grained invalidation</h3><p>在之前,对package代码做了变更后,gopls必须重新编译直接或间接import该package的package(增量构建系统的基本原理)</p>
<blockquote>
<p>When you make a change in one package, it’s only necessary to recompile the packages that import that one, directly or indirectly. This idea is the basis of all incremental build systems since Make in the 1970s, and gopls has been using it since its inception</p>
</blockquote>
<p>从v0.12开始,只要代码变更不影响import summary就不需要重新编译</p>
<h3 id="optimize-static-anlysis"><a href="#optimize-static-anlysis" class="headerlink" title="optimize static anlysis"></a>optimize static anlysis</h3><p>在此之前,gopls无法实现在内存中做太多static anlysis(会引入大量依赖,内存占用飙升)</p>
<p>v0.12优化内存占用后引入了新的anlysis,实现类似go vet的静态分析</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://go.dev/blog/gopls-scalability" target="_blank" rel="noopener">go.dev/blog: Scaling gopls for the growing Go ecosystem</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://programnotes.cn/idea-issue-protobuf/index.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Image/logo.png">
      <meta itemprop="name" content="yigmmk">
      <meta itemprop="description" content="learn & share & note">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="编程笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/idea-issue-protobuf/index.html" class="post-title-link" itemprop="url">idea|问题定位-protobuf生成异常</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-09-12 00:00:00" itemprop="dateCreated datePublished" datetime="2023-09-12T00:00:00+08:00">2023-09-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-03-26 22:25:21" itemprop="dateModified" datetime="2024-03-26T22:25:21+08:00">2024-03-26</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>在SpringCloud应用里使用protobuf,通过Maven编译生成对应的类,结果有一个类Idea飘红,无法跳转</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">Position</span></span>&#123;</span><br><span class="line">    <span class="built_in">double</span> x = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Position正常情况下,应该生成 Position 和 PositionOrBuilder 2个类,出现的问题是Position类飘红,无法跳转</p>
</li>
<li><p>安装了Idea官方插件”Protocol Buffers”,正常能从Protobuf文件中的定义跳转到生成的类上,Position只能跳转到<br>PositionOrBuilder上</p>
</li>
<li><p>在Protobuf文件中还定义了多个其他类,都能正常生成</p>
</li>
</ul>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>发现是生成的类文件过大,修改Idea配置,解决”The file size exceeds configured limit”<br>问题后能正常跳转了</p>
<p><img src="https://image-1252731913.cos.ap-guangzhou.myqcloud.com/blog-img/97f257b59ac3be4851c52ae0d55c54cc.png" alt="file size exceeds configured limit"></p>
<p>Idea菜单栏点击”Help”-&gt;”Edit custom properties” 添加下面的配置,修改文件大小限制</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> custom IntelliJ IDEA properties</span></span><br><span class="line">idea.max.intellisense.filesize=50000</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/idea-issue-protobuf/index.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yigmmk"
      src="/Image/logo.png">
  <p class="site-author-name" itemprop="name">yigmmk</p>
  <div class="site-description" itemprop="description">learn & share & note</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">95</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">123</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yiGmMk" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yiGmMk" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:support@programnotes.cn" title="E-Mail → mailto:support@programnotes.cn"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yigmmk.github.io/coding-practicing" title="Blog → https:&#x2F;&#x2F;yigmmk.github.io&#x2F;coding-practicing" rel="noopener" target="_blank"><i class="github fa-fw"></i>Blog</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/deeplearning-cv/posts" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;deeplearning-cv&#x2F;posts" rel="noopener" target="_blank"><i class="user fa-fw"></i>Zhihu</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://nav.programnotes.cn/" title="导航 → https:&#x2F;&#x2F;nav.programnotes.cn" rel="noopener" target="_blank"><i class="nav fa-fw"></i>导航</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://yigmmk.github.io/coding-practicing/go/to-do-list.html" title="https:&#x2F;&#x2F;yigmmk.github.io&#x2F;coding-practicing&#x2F;go&#x2F;to-do-list.html" rel="noopener" target="_blank">刷题-leetcode常见题型</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://github.com/yiGmMk/coding-practicing" title="https:&#x2F;&#x2F;github.com&#x2F;yiGmMk&#x2F;coding-practicing" rel="noopener" target="_blank">刷题-学习-记录</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">闽ICP备16032016号-1 </a>
      <img src="/images/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=16032016" rel="noopener" target="_blank">闽公安网备16032016 </a>
  </div>

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yiGmMk 闽ICP备16032016号-1</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">115k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:45</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  


</body>
</html>
